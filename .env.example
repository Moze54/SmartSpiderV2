# SmartSpider 配置文件示例
# 复制此文件为 .env 并根据需要修改

# 基础配置
DEBUG=false
ENVIRONMENT=production
HOST=0.0.0.0
PORT=8000
WORKERS=1

# 数据库配置
DB_HOST=localhost
DB_PORT=5432
DB_USER=smartspider
DB_PASSWORD=smartspider123
DB_NAME=smartspider

# Redis配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Celery配置
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# MinIO配置
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET=smartspider

# 安全配置
SECRET_KEY=your-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS配置
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
ALLOWED_METHODS=*
ALLOWED_HEADERS=*

# 日志配置
LOG_LEVEL=INFO
LOG_FILE_PATH=logs/smartspider.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
ENABLE_STRUCTURED_LOG=true
SENTRY_DSN=

# 爬虫配置
MAX_CONCURRENT_REQUESTS=100
DOWNLOAD_DELAY=1.0
RANDOMIZE_DOWNLOAD_DELAY=true
RETRY_TIMES=3
DOWNLOAD_TIMEOUT=30
USER_AGENT=SmartSpider/1.0 (+https://github.com/your-repo)
PROXY_ENABLED=false
PROXY_LIST=

# 监控配置
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8000
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
METRICS_ENABLED=true
METRICS_INTERVAL=60

# 存储配置
MAX_UPLOAD_SIZE=10485760
UPLOAD_DIR=uploads
OUTPUT_DIR=./output
STORAGE_DIR=./storage

# 高级配置
REQUEST_FINGERPRINT_ENABLED=true
REQUEST_DEDUPLICATION_ENABLED=true
COOKIE_ROTATION_ENABLED=true
PROXY_ROTATION_ENABLED=true
BROWSER_COOKIE_ENABLED=true
DATA_VALIDATION_ENABLED=true

# 性能配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
REDIS_CONNECTION_POOL_SIZE=50
CONCURRENT_LIMIT=5

# 代理池配置
PROXY_TEST_URL=https://httpbin.org/ip
PROXY_CHECK_INTERVAL=300
PROXY_MAX_RESPONSE_TIME=10.0
PROXY_MIN_SUCCESS_RATE=0.8
PROXY_MAX_FAILURES=5

# 调度器配置
SCHEDULER_ENABLED=true
SCHEDULER_MAX_INSTANCES=3
SCHEDULER_COALESCE=false
SCHEDULER_MISFIRE_GRACE_TIME=300

# 数据导出配置
EXPORT_FORMATS=json,csv,excel
EXPORT_MAX_RECORDS=100000
EXPORT_FILE_SIZE_LIMIT=104857600

# 安全限制
MAX_URL_LENGTH=2048
MAX_CONTENT_LENGTH=10485760
MAX_REDIRECTS=10
MAX_RETRY_TIMES=5

# 清理配置
CLEANUP_OLD_FILES_DAYS=30
CLEANUP_OLD_COOKIES_DAYS=7
CLEANUP_OLD_PROXIES_DAYS=30
CLEANUP_INTERVAL_HOURS=24